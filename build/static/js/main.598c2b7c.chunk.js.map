{"version":3,"sources":["Search.js","services/persons.js","AddUserForm.js","Persons.js","App.js","index.js"],"names":["Search","filter","setFilter","type","value","onChange","e","target","axios","get","person","post","put","id","delete","AddUserForm","newName","setNewName","newNumber","setNewNumber","persons","setPersons","setSuccessMessage","setErrorMessage","displayErrorMessage","error","console","log","response","data","errorText","setTimeout","onClick","preventDefault","contactExists","map","p","name","toLowerCase","includes","confirmText","window","confirm","oldPersonIndex","indexOf","oldPerson","updatedPerson","number","updatedPersonList","personService","then","_","catch","newPerson","length","Persons","i","key","App","useState","successMessage","errorMessage","useEffect","className","ReactDOM","render","StrictMode","document","getElementById"],"mappings":"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","file":"static/js/main.598c2b7c.chunk.js","sourcesContent":["import React from 'react';\n\nexport const Search = ({ filter, setFilter }) => {\n  return (\n    <div>\n      filter shown with{' '}\n      <input\n        type=\"text\"\n        value={filter}\n        onChange={(e) => setFilter(e.target.value)}\n      />\n    </div>\n  );\n};\n","import axios from 'axios';\nconst BASE_URL = '/api/persons';\n\nconst getAll = () => {\n  return axios.get(BASE_URL);\n  // return request.then(response => response.data)\n};\n\nconst addPerson = (person) => {\n  return axios.post(BASE_URL, person);\n};\n\nconst updatePerson = (person) => {\n  return axios.put(`${BASE_URL}/${person.id}`, person);\n};\n\nconst deletePerson = (id) => {\n  return axios.delete(`${BASE_URL}/${id}`);\n};\n\nexport default {\n  getAll,\n  addPerson,\n  updatePerson,\n  deletePerson,\n};\n","import React from 'react';\nimport personService from './services/persons';\n\nexport const AddUserForm = ({\n  newName,\n  setNewName,\n  newNumber,\n  setNewNumber,\n  persons,\n  setPersons,\n  setSuccessMessage,\n  setErrorMessage,\n}) => {\n  // Displays error message for 3 seconds\n  const displayErrorMessage = (error) => {\n    console.log(error.response.data.error);\n    const errorText = error.response.data.error;\n    setErrorMessage(errorText);\n    setTimeout(() => {\n      setErrorMessage(null);\n    }, 3000);\n  };\n\n  // Displays success message for 3 seconds\n  const displaySuccessMessage = () => {\n    setSuccessMessage(`${newName} added`);\n    setTimeout(() => {\n      setSuccessMessage(null);\n    }, 3000);\n  };\n\n  const handleSaveClick = (e) => {\n    e.preventDefault();\n    // Checks if newly created name exists in contacts list\n    const contactExists = persons\n      .map((p) => p.name.toLowerCase())\n      .includes(newName.toLowerCase());\n\n    // Existing contact replacement text\n    const confirmText = `${newName} is already added to phonebook, replace the old number with a new one?`;\n\n    if (contactExists) {\n      if (window.confirm(confirmText)) {\n        // Finds old person in the contacts list\n        const oldPersonIndex = persons\n          .map((p) => p.name.toLowerCase())\n          .indexOf(newName.toLowerCase());\n        const oldPerson = persons[oldPersonIndex];\n\n        // Updates old person object & all person list\n        const updatedPerson = { ...oldPerson, number: newNumber };\n        const updatedPersonList = [...persons];\n        updatedPersonList[oldPersonIndex] = updatedPerson;\n\n        // Tires updating person in the phonebook\n        personService\n          .updatePerson(updatedPerson)\n          .then((_) => {\n            // Updates person List & resets local state\n            setNewName('');\n            setNewNumber('');\n            setPersons(updatedPersonList);\n          })\n          .catch((e) => displayErrorMessage(e));\n      }\n    } else {\n      // Creates a new contact\n      const newPerson = {\n        name: newName,\n        number: newNumber,\n        id: persons.length + 1,\n      };\n\n      // Saves data in db.json\n      personService\n        .addPerson(newPerson)\n        .then((_) => {\n          // Updates person List & resets local state\n          setPersons([...persons, newPerson]);\n          setNewName('');\n          setNewNumber('');\n          displaySuccessMessage();\n        })\n        .catch((e) => displayErrorMessage(e));\n    }\n  };\n\n  return (\n    <form>\n      <div>\n        name:{' '}\n        <input\n          type=\"text\"\n          value={newName}\n          onChange={(e) => setNewName(e.target.value)}\n        />\n      </div>\n      <div>\n        number:{' '}\n        <input\n          type=\"text\"\n          value={newNumber}\n          onChange={(e) => setNewNumber(e.target.value)}\n        />\n      </div>\n      <div>\n        <button type=\"submit\" onClick={handleSaveClick}>\n          add\n        </button>\n      </div>\n    </form>\n  );\n};\n","import React from 'react';\nimport personService from './services/persons';\n\nexport const Persons = ({ persons, filter, setPersons }) => {\n  const deletePerson = (person) => {\n    if (window.confirm(`Delete ${person.name}?`)) {\n      setPersons(...[persons.filter((p) => p.id !== person.id)]);\n      personService.deletePerson(person.id);\n    }\n  };\n\n  return (\n    <div>\n      {persons\n        .filter((p) =>\n          filter === ''\n            ? true\n            : p.name.toLowerCase().includes(filter.toLowerCase())\n        )\n        .map((p, i) => (\n          <div key={`${p.name} ${i}`}>\n            <p>\n              {`${p.name} ${p.number} `}{' '}\n              <button onClick={() => deletePerson(p)}>delete</button>\n            </p>\n          </div>\n        ))}\n    </div>\n  );\n};\n","import React, { useState, useEffect } from 'react';\nimport { Search } from './Search';\nimport { AddUserForm } from './AddUserForm';\nimport { Persons } from './Persons';\nimport personService from './services/persons';\nimport './App.css';\n\nconst App = () => {\n  const [persons, setPersons] = useState([]);\n  const [filter, setFilter] = useState('');\n  const [newName, setNewName] = useState('');\n  const [newNumber, setNewNumber] = useState('');\n  const [successMessage, setSuccessMessage] = useState(null);\n  const [errorMessage, setErrorMessage] = useState(null);\n\n  // Fetches initial data\n  useEffect(() => {\n    personService.getAll().then((response) => {\n      setPersons(response.data);\n    });\n  }, []);\n\n  return (\n    <div>\n      <h2>Phonebook</h2>\n      {successMessage && (\n        <div className=\"success\">\n          <p>{successMessage}</p>\n        </div>\n      )}\n      {errorMessage && (\n        <div className=\"error\">\n          <p>{errorMessage}</p>\n        </div>\n      )}\n      <Search filter={filter} setFilter={setFilter} />\n      <h2>Add a new</h2>\n      <AddUserForm\n        newName={newName}\n        setNewName={setNewName}\n        newNumber={newNumber}\n        setNewNumber={setNewNumber}\n        persons={persons}\n        setPersons={setPersons}\n        setSuccessMessage={setSuccessMessage}\n        setErrorMessage={setErrorMessage}\n      />\n      <h2>Numbers</h2>\n      <Persons persons={persons} filter={filter} setPersons={setPersons} />\n    </div>\n  );\n};\n\nexport default App;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n"],"sourceRoot":""}